database:
  host: tidb
  port: 4000
  user: app_mtls
  database: tidb_graphql_tutorial
  tls:
    mode: verify-full
    ca_file: /pki/ca/root_ca.crt
    cert_file: /pki/tidb-graphql-to-tidb/client.crt
    key_file: /pki/tidb-graphql-to-tidb/client.key
    server_name: tidb

server:
  port: 8080
  graphiql_enabled: true
  tls_mode: file
  tls_cert_file: /pki/tidb-graphql/server.crt
  tls_key_file: /pki/tidb-graphql/server.key
  search:
    vector_require_index: false
  auth:
    oidc_enabled: true
    oidc_issuer_url: https://jwks:9000
    oidc_audience: tidb-graphql
    oidc_ca_file: /pki/ca/root_ca.crt
    db_role_enabled: true
    db_role_claim_name: db_role
    db_role_introspection_role: app_introspect
  admin:
    schema_reload_enabled: true

observability:
  environment: development
  service_name: tidb-graphql

  # Metrics configuration
  metrics_enabled: true

  # Distributed tracing configuration

  tracing_enabled: true
  sqlcommenter_enabled: true

  # Logging configuration
  logging:
    level: info
    format: json
    exports_enabled: false

  # Global OTLP configuration (defaults for all signals: traces, logs)
  otlp:
    protocol: http/protobuf                # Protocol for OTLP export: http/protobuf, grpc, http/json
    endpoint: api.honeycomb.io:443
    insecure: false                 # Use insecure connection (no TLS)
    tls_cert_file: ""               # Path to CA certificate for server verification
    tls_client_cert_file: ""        # Path to client certificate for mTLS
    tls_client_key_file: ""         # Path to client key for mTLS
    # Keep headers empty in checked-in config. Inject auth headers via
    # OTEL_EXPORTER_OTLP_HEADERS at runtime (for example via .env).
    headers: {}
    timeout: 10s                    # Export timeout duration
    compression: gzip               # Compression type: none, gzip
    retry_enabled: true             # Enable retry on transient errors
    retry_max_attempts: 3           # Maximum retry attempts
